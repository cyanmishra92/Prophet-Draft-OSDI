%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template for USENIX papers.
%
% History:
%
% - TEMPLATE for Usenix papers, specifically to meet requirements of
%   USENIX '05. originally a template for producing IEEE-format
%   articles using LaTeX. written by Matthew Ward, CS Department,
%   Worcester Polytechnic Institute. adapted by David Beazley for his
%   excellent SWIG paper in Proceedings, Tcl 96. turned into a
%   smartass generic template by De Clarke, with thanks to both the
%   above pioneers. Use at your own risk. Complaints to /dev/null.
%   Make it two column with no page numbering, default is 10 point.
%
% - Munged by Fred Douglis <douglis@research.att.com> 10/97 to
%   separate the .sty file from the LaTeX source template, so that
%   people can more easily include the .sty file into an existing
%   document. Also changed to more closely follow the style guidelines
%   as represented by the Word sample file.
%
% - Note that since 2010, USENIX does not require endnotes. If you
%   want foot of page notes, don't include the endnotes package in the
%   usepackage command, below.
% - This version uses the latex2e styles, not the very ancient 2.09
%   stuff.
%
% - Updated July 2018: Text block size changed from 6.5" to 7"
%
% - Updated Dec 2018 for ATC'19:
%
%   * Revised text to pass HotCRP's auto-formatting check, with
%     hotcrp.settings.submission_form.body_font_size=10pt, and
%     hotcrp.settings.submission_form.line_height=12pt
%
%   * Switched from \endnote-s to \footnote-s to match Usenix's policy.
%
%   * \section* => \begin{abstract} ... \end{abstract}
%
%   * Make template self-contained in terms of bibtex entires, to allow
%     this file to be compiled. (And changing refs style to 'plain'.)
%
%   * Make template self-contained in terms of figures, to
%     allow this file to be compiled. 
%
%   * Added packages for hyperref, embedding fonts, and improving
%     appearance.
%   
%   * Removed outdated text.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[letterpaper,twocolumn,10pt]{article}
\usepackage{usenix-2020-09}

% to be able to draw some self-contained figs
% \usepackage{tikz}
% \usepackage{amsmath}

% % inlined bib file
% \usepackage{filecontents}

%%%% %%%% %%%% %%%%
%%%%% Packages and Commands %%%%%

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
%\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{xcolor}         % colors
\usepackage{float}

\usepackage{multirow}
\usepackage{wrapfig}

\usepackage{graphics}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{wrapfig}
\usepackage[subfigure]{tocloft}
\usepackage{subcaption}
\usepackage{amsfonts,bm}
\usepackage{natbib} 
\usepackage{makecell}

\usepackage{algorithm}
\usepackage{adjustbox}


\usepackage{algpseudocode}
\usepackage{amsmath}
\usepackage{float}
\usepackage{multicol}
\usepackage{setspace}

\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}
\usepackage{circuitikz}
 \usepackage{tabularray}
 \usepackage{multirow}
\usepackage{colortbl}
%\usepackage{cleveref}
\usepackage{ifthen}
\usepackage{listings}
\usepackage{tabularx}


\usepackage[inline]{enumitem}
\usepackage{hyperref}
\usepackage[capitalise,nameinlink]{cleveref}

%%%% Commands %%%%
% FIXME
\newcommand{\fixme}[1]{\textcolor{red}{#1}}
%CIRCLED
% \DeclareRobustCommand*\circled[1]{\tikz[baseline=(char.base)]{
%           \node[shape=circle,draw,fill=black,text=white,font=\bf,inner sep=1pt] (char)
%             {\normalsize#1};}}

\DeclareRobustCommand*\circled[1]{%
  \tikz[baseline=(char.base)]{%
    \node[shape=circle,
          draw=black, line width=0.5pt,  % black outline at 0.5pt
          fill={rgb,255:red,245;green,245;blue,245}, % F5F5F5
          text=black,
          inner sep=0pt,
          minimum size=10pt] (char) {\fontsize{10pt}{10pt}\selectfont #1};}}
          
% TOPK
\newcommand{\topk}{\texttt{top-k }}
% R+A
\newcommand{\RA}{\texttt{BA}}

%s Section ref
\newcommand{\xref}[1]{\S\ref{#1}}
% Rishabh's macro
%\newcommand\rishabh[1]{\textcolor{blue}{RJ: #1}}
\newboolean{showcomments}
\setboolean{showcomments}{true} % Change to false to hide the text

\newcommand{\rishabh}[1]{%
  \ifthenelse{\boolean{showcomments}}%
    {\textcolor{blue}{RJ: #1}}%  % if true, print normally
    {\phantom{\textcolor{blue}{RJ: #1}}}% % if false, print an invisible copy (space preserved)
}

%\newcommand\design[1]{\textcolor{black}{MaestroRAG}}

\newcommand\todo[1]{\textcolor{red}{TODO: #1}}
% \renewcommand\rishabh[1]{}
% table needs
\usepackage[table]{xcolor} % For cell coloring
\usepackage{makecell} % For multi-line cells
\usepackage{pifont} % For tick and cross marks
\usepackage{booktabs} % For better table styling
\usepackage{comment}

\newcommand{\cmark}{\ding{51}} % Tick mark
\newcommand{\xmark}{\ding{55}} % Cross mark

\newcommand{\flashRAG}{FlashRAG~\cite{jin2024flashrag}}
\newcommand{\edgeRAG}{EdgeRAG~\cite{EdgeRAG}}
\newcommand{\pipeRAG}{PipeRAG~\cite{jiang2024piperag}}

\newcommand{\design}{Prophet } % Change Name here


%\usepackage{amsmath}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
%%%%%%%%%%%%%%%%%%


%%%% %%%% %%%% %%%%

% Define the circled command
% \newcommand{\circled}[1]{%
%   \tikz[baseline=(char.base)]{
%     \node[shape=circle,
%           fill={rgb,255:red,245;green,245;blue,245}, % F5F5F5 color
%           text=black,
%           inner sep=0pt,
%           minimum size=15pt] (char) {\fontsize{10pt}{10pt}\selectfont #1};}}

%\usepackage{xcolor}
\usepackage{tcolorbox}

% Style for the box
\tcbset{
  colback=blue!5!white,
  colframe=blue!75!black,
  boxrule=0.5pt,
  arc=2pt,
  left=1pt,
  right=1pt,
  top=1pt,
  bottom=1pt
}

% Define counter and environment
\newcounter{insightcounter}
\newenvironment{insight}{
  \refstepcounter{insightcounter}%
  \begin{tcolorbox}
  \textbf{Insight \theinsightcounter:} \em
}{
  \end{tcolorbox}
}


% Python code style
\lstdefinestyle{mypython}{
    language=Python,
    basicstyle=\ttfamily\small,
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{green!50!black},
    stringstyle=\color{orange},
    showstringspaces=false,
    breaklines=true,
    frame=single,
    tabsize=4
}
%%%% %%%% %%%% %%%%

%-------------------------------------------------------------------------------
\begin{document}
%-------------------------------------------------------------------------------

%don't want date printed
%\date{}

% make title bold and 14 pt font (Latex default is non-bold, 16 pt)
\title{Prophet: Neural Expert Prediction for Efficient Mixture-of-Experts Inference}

%for single author (just remove % characters)
\author{~
% {\rm Your N.\ Here}\\
% Your Institution
% % \and
% % {\rm Second Name}\\
% % Second Institution
% % copy the following lines to add more authors
% % \and
% % {\rm Name}\\
% %Name Institution
} % end author


\maketitle

%-------------------------------------------------------------------------------
\begin{abstract}
%-------------------------------------------------------------------------------
\input{src/00abstract_revised}
\end{abstract}


%-------------------------------------------------------------------------------
%%%%%%%%%% %%%%%%%%%% %%%%%%%%%% %%%%%%%%%%
%%%%%%%%%%  CHAPTERS GOES HERE   %%%%%%%%%%
% Organization:
%src :      Chapters
%figs:      All diagrams
%tabNalgo:  Tables, Algorithms, Pseudocodes
%appendix:  Appendix Chalters

% Start Chapters
\input{src/01Itroduction}
\input{src/02BGnMotivation}
\input{src/04Design}
\input{src/05Implementation&Eval}
\input{src/07RelatedWork}
\input{src/08Conclusions}
%%%%%%%%%% %%%%%%%%%% %%%%%%%%%% %%%%%%%%%%

% End Chapters

%%%%%%%%%% %%%%%%%%%% %%%%%%%%%% %%%%%%%%%%

%-------------------------------------------------------------------------------
\bibliographystyle{plain}
\bibliography{sample-base}

%%%%%%%%%% %%%%%%%%%% %%%%%%%%%% %%%%%%%%%%
%%%%%%%%%%   APPENDIX GOES HERE  %%%%%%%%%%
%\clearpage
%% If your work has an appendix, this is the place to put it.
\clearpage
\appendix
\pagenumbering{arabic}
\setcounter{page}{1}
%\input{Appendix/AdditionalResults}
%\input{Appendix/MemHierarchy}
\input{Appendix/Predictor}
\input{Appendix/Caching}
\input{Appendix/MoEModels}
\input{Appendix/Throughput}



%%%%%%%%%% %%%%%%%%%% %%%%%%%%%% %%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
